
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Guida italiana del framework PHP Yii 2.0">
      
      
      
        <meta name="author" content="Lorenzo Milicia">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.languages" content="">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.12.1">
    
    
      
        <title>Gestione degli errori - YII2 - La guida italiana</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-e826f8942a.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-04ea671600.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-23f75ab9c7.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="teal" data-md-color-accent="deep-orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="YII2 - La guida italiana" class="md-header-nav__button md-logo">
          
            <i class="md-icon md-icon--home"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Gestione delle richieste
                </span>
              
            
            Gestione degli errori
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/Milicia4/Yii2-Ita.git" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="Homepage" class="md-tabs__link">
        Homepage
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../getting-started/sub-installing-Yii/" title="Come Iniziare" class="md-tabs__link">
          Come Iniziare
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../application-structure/sub-overview/" title="Struttura dell'Applicazione" class="md-tabs__link">
          Struttura dell'Applicazione
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../sub-request-overview/" title="Gestione delle richieste" class="md-tabs__link md-tabs__link--active">
          Gestione delle richieste
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon md-icon--home"></i>
      
    </span>
    YII2 - La guida italiana
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/Milicia4/Yii2-Ita.git" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Homepage" class="md-nav__link">
      Homepage
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Come Iniziare
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Come Iniziare
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/sub-installing-Yii/" title="Installazione di Yii" class="md-nav__link">
      Installazione di Yii
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/sub-saying-hello/" title="Iniziamo con un "Ciao"" class="md-nav__link">
      Iniziamo con un "Ciao"
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/sub-working-with-forms/" title="Lavoriamo con i moduli" class="md-nav__link">
      Lavoriamo con i moduli
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/sub-working-with-database/" title="Lavoriamo con i database" class="md-nav__link">
      Lavoriamo con i database
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/sub-generate-code-gii/" title="Generare codice con Gii" class="md-nav__link">
      Generare codice con Gii
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/sub-looking-ahead/" title="Guardiamo avanti" class="md-nav__link">
      Guardiamo avanti
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Struttura dell'Applicazione
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Struttura dell'Applicazione
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../application-structure/sub-overview/" title="Panoramica" class="md-nav__link">
      Panoramica
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../application-structure/sub-entry-script/" title="Entry Script" class="md-nav__link">
      Entry Script
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../application-structure/sub-applications/" title="Applicazioni" class="md-nav__link">
      Applicazioni
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../application-structure/sub-application-components/" title="Componenti applicativi" class="md-nav__link">
      Componenti applicativi
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../application-structure/sub-controllers/" title="Controllori" class="md-nav__link">
      Controllori
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../application-structure/sub-models/" title="Modelli" class="md-nav__link">
      Modelli
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../application-structure/sub-views/" title="Viste" class="md-nav__link">
      Viste
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../application-structure/sub-modules/" title="Moduli" class="md-nav__link">
      Moduli
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../application-structure/sub-filters/" title="Filtri" class="md-nav__link">
      Filtri
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../application-structure/sub-widget/" title="Widget" class="md-nav__link">
      Widget
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../application-structure/sub-assets/" title="Assets" class="md-nav__link">
      Assets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../application-structure/sub-extensions/" title="Estensioni" class="md-nav__link">
      Estensioni
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Gestione delle richieste
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Gestione delle richieste
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../sub-request-overview/" title="Panoramica sulla gestione delle richieste" class="md-nav__link">
      Panoramica sulla gestione delle richieste
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sub-bootstrapping/" title="Bootstrapping" class="md-nav__link">
      Bootstrapping
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sub-routing-url-creation/" title="Routing e creazione degli URL" class="md-nav__link">
      Routing e creazione degli URL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sub-requests/" title="Requests" class="md-nav__link">
      Requests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sub-responses/" title="Responses" class="md-nav__link">
      Responses
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sub-session-cookies/" title="Session & Cookies" class="md-nav__link">
      Session & Cookies
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Gestione degli errori
      </label>
    
    <a href="./" title="Gestione degli errori" class="md-nav__link md-nav__link--active">
      Gestione degli errori
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#utilizziamo-lerror-handle" title="Utilizziamo l'Error Handle" class="md-nav__link">
    Utilizziamo l'Error Handle
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#personalizzazione-della-visualizzazione-degli-errori" title="Personalizzazione della visualizzazione degli errori" class="md-nav__link">
    Personalizzazione della visualizzazione degli errori
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilizzo-delle-azioni-di-errori" title="Utilizzo delle azioni di errori" class="md-nav__link">
    Utilizzo delle azioni di errori
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#personalizzazione-del-formato-di-risposta-degli-errori" title="Personalizzazione del formato di risposta degli errori" class="md-nav__link">
    Personalizzazione del formato di risposta degli errori
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sub-logging/" title="Registrazione" class="md-nav__link">
      Registrazione
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#utilizziamo-lerror-handle" title="Utilizziamo l'Error Handle" class="md-nav__link">
    Utilizziamo l'Error Handle
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#personalizzazione-della-visualizzazione-degli-errori" title="Personalizzazione della visualizzazione degli errori" class="md-nav__link">
    Personalizzazione della visualizzazione degli errori
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilizzo-delle-azioni-di-errori" title="Utilizzo delle azioni di errori" class="md-nav__link">
    Utilizzo delle azioni di errori
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#personalizzazione-del-formato-di-risposta-degli-errori" title="Personalizzazione del formato di risposta degli errori" class="md-nav__link">
    Personalizzazione del formato di risposta degli errori
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/Milicia4/Yii2-Ita.git/edit/master/docs/handling-requests/sub-handling-error.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="gestione-degli-errori">Gestione degli errori<a class="headerlink" href="#gestione-degli-errori" title="Permanent link">&para;</a></h1>
<p>Yii include un gestore di errori incorporato che rende la gestione degli errori un'esperienza molto più piacevole di prima. In particolare, il gestore degli errori Yii effettua le seguenti operazioni per migliorare la gestione degli errori:</p>
<ul>
<li>Tutti gli errori PHP non fatali (ad es. avvertimenti, notifiche) vengono convertiti in eccezioni <strong><em>Catchable</em></strong>.</li>
<li>Eccezioni e errori fatali di PHP vengono visualizzati con informazioni dettagliate sullo stack di chiamata e linee di codice sorgente in modalità di debug.</li>
<li>Supporta l'utilizzo di un'azione del controller dedicata per visualizzare gli errori.</li>
<li>Supporta diversi formati di risposta agli errori.</li>
</ul>
<p>Il gestore degli errori è abilitato per impostazione predefinita. Si può disabilitarlo definendo la costante <code>YII_ENABLE_ERROR_HANDLER</code> di essere <code>false</code> nell'entry script della vostra applicazione.</p>
<h2 id="utilizziamo-lerror-handle">Utilizziamo l'Error Handle<a class="headerlink" href="#utilizziamo-lerror-handle" title="Permanent link">&para;</a></h2>
<p>Il gestore degli errori è registrato come un componente dell'applicazione denominato <code>errorHandler</code>. Puoi configurarlo nella configurazione dell'applicazione come segue:</p>
<pre><code>return [
    'components' =&gt; [
        'errorHandler' =&gt; [
            'maxSourceLines' =&gt; 20,
        ],
    ],
];
</code></pre>
<p>Con la configurazione di cui sopra indicata, il numero di linee di codice sorgente da visualizzare nelle pagine delle eccezioni sarà fino a 20.</p>
<p>Come già detto, il gestore degli errori trasforma tutti gli errori PHP non fatali in eccezioni <strong><em>Catchable</em></strong>. Ciò significa che è possibile utilizzare il seguente codice per gestire gli errori PHP:</p>
<pre><code>use Yii;
use yii\base\ErrorException;

try {
    10/0;
} catch (ErrorException $e) {
    Yii::warning("Division by zero.");
}

// execution continues...
</code></pre>
<p>Se vuoi mostrare una pagina di errore che informa l'utente che la sua richiesta non è valida o inaspettata, puoi semplicemente lanciare un'eccezione HTTP , come <strong><em>yii \ web \ NotFoundHttpException</em></strong>. Il gestore degli errori imposterà correttamente il codice di stato HTTP della risposta e utilizzerà una vista di errore appropriata per visualizzare il messaggio di errore.</p>
<pre><code>use yii\web\NotFoundHttpException;

throw new NotFoundHttpException();
</code></pre>
<h2 id="personalizzazione-della-visualizzazione-degli-errori">Personalizzazione della visualizzazione degli errori<a class="headerlink" href="#personalizzazione-della-visualizzazione-degli-errori" title="Permanent link">&para;</a></h2>
<p>Il gestore degli errori regola la visualizzazione degli errori in base al valore della costante <code>YII_DEBUG</code>. Quando <code>YII_DEBUG</code> è a <code>true</code>(ovvero in modalità di debug), il gestore degli errori visualizza eccezioni con informazioni dettagliate sullo stack delle chiamate e linee del codice sorgente per facilitare il debugging. E quando <code>YII_DEBUG</code> è a <code>false</code>, verrà visualizzato solo il messaggio di errore per evitare di rivelare informazioni sensibili sull'applicazione.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Se un'eccezione è discendente da <strong><em>yii \ base \ UserException</em></strong>, non verrà visualizzato alcuno stack di chiamate indipendentemente dal valore di <code>YII_DEBUG</code>. Questo perché tali eccezioni sono considerate causate da errori dell'utente e gli sviluppatori non hanno bisogno di aggiustare nulla.</p>
</div>
<p>Per impostazione predefinita, il gestore errori visualizza gli errori utilizzando due viste :</p>
<ul>
<li><code>@yii/views/errorHandler/error.php</code>: usato quando devono essere visualizzati gli errori SENZA informazioni sullo stack di chiamata. Quando <code>YII_DEBUG</code> è a <code>false</code>, questa è l'unica visualizzazione di errore da visualizzare.</li>
<li><code>@yii/views/errorHandler/exception.php</code>: usato quando devono essere visualizzati gli errori CON le informazioni sullo stack delle chiamate.</li>
</ul>
<p>È possibile configurare le proprietà <code>errorView`` e</code>exceptionView` del gestore degli errori per utilizzare le proprie visualizzazioni per personalizzare la visualizzazione degli errori.</p>
<h2 id="utilizzo-delle-azioni-di-errori">Utilizzo delle azioni di errori<a class="headerlink" href="#utilizzo-delle-azioni-di-errori" title="Permanent link">&para;</a></h2>
<p>Un modo migliore per personalizzare la visualizzazione degli errori consiste nell'utilizzare azioni di errore dedicati. Per fare ciò, dobbiamo configurare innanzitutto la proprietà <code>errorAction</code> del componente <code>errorHandler</code> come segue:</p>
<pre><code>return [
    'components' =&gt; [
        'errorHandler' =&gt; [
            'errorAction' =&gt; 'site/error',
        ],
    ]
];
</code></pre>
<p>La proprietà <code>errorAction</code> prende una rotta verso un'azione. La configurazione precedente indica che quando è necessario visualizzare un errore senza informazioni sullo stack di chiamata, l'azione <code>site/error</code> deve essere eseguita.</p>
<p>È possibile creare l'azione <code>site/error</code> come segue,</p>
<pre><code>namespace app\controllers;

use Yii;
use yii\web\Controller;

class SiteController extends Controller{

    public function actions(){

        return [
            'error' =&gt; [
                'class' =&gt; 'yii\web\ErrorAction',
            ],
        ];
    }
}
</code></pre>
<p>Il codice precedente definisce l'azione <code>error</code> utilizzando la classe <strong><em>yii \ web \ ErrorAction</em></strong> che esegue il rendering di un errore utilizzando una vista denominata <code>error</code>.</p>
<p>Oltre a usare <strong><em>yii \ web \ ErrorAction</em></strong>, puoi anche definire l'azione <code>error</code> usando un metodo di azione come il seguente,</p>
<pre><code>public function actionError(){

    $exception = Yii::$app-&gt;errorHandler-&gt;exception;
    if ($exception !== null) {
        return $this-&gt;render('error', ['exception' =&gt; $exception]);
    }
}
</code></pre>
<p>Ora dovresti creare un file di visualizzazione situato in <code>views/site/error.php</code>. In questo file di visualizzazione, è possibile accedere alle seguenti variabili se l'azione di errore è definita come <strong><em>yii \ web \ ErrorAction</em></strong>:</p>
<ul>
<li><code>name</code>: il nome dell'errore;</li>
<li><code>message</code>: il messaggio di errore;</li>
<li><code>exception</code>: l'oggetto di eccezione attraverso il quale è possibile recuperare informazioni più utili, come codice di stato HTTP, codice di errore, stack di chiamate di errore, ecc.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Se è necessario reindirizzare la pagina in un gestore errori, conviene farlo nel seguente modo:
    Yii::$app-&gt;getResponse()-&gt;redirect($url)-&gt;send();
    return;</p>
</div>
<h2 id="personalizzazione-del-formato-di-risposta-degli-errori">Personalizzazione del formato di risposta degli errori<a class="headerlink" href="#personalizzazione-del-formato-di-risposta-degli-errori" title="Permanent link">&para;</a></h2>
<p>Il gestore degli errori visualizza gli errori in base all'impostazione del formato della risposta. Se il formato della risposta è html, utilizzerà l'errore o la visualizzazione delle eccezioni per visualizzare gli errori, come descritto nell'ultima sottosezione. Per altri formati di risposta, il gestore degli errori assegnerà la rappresentazione dell'array dell'eccezione alla proprietà dei dati <strong><em>yii \ web \ Response :: $</em></strong> che verrà quindi convertita in diversi formati di conseguenza. Ad esempio, se il formato della risposta è <code>json</code>, potresti vedere la seguente risposta:</p>
<pre><code>HTTP/1.1 404 Not Found
Date: Sun, 02 Mar 2014 05:31:43 GMT
Server: Apache/2.2.26 (Unix) DAV/2 PHP/5.4.20 mod_ssl/2.2.26 OpenSSL/0.9.8y
Transfer-Encoding: chunked
Content-Type: application/json; charset=UTF-8

{
    "name": "Not Found Exception",
    "message": "The requested resource was not found.",
    "code": 0,
    "status": 404
}
</code></pre>
<p>È possibile personalizzare il formato di risposta dell'errore rispondendo all'evento <code>beforeSend</code> del componente <code>response</code> nella configurazione dell'applicazione:</p>
<pre><code>return [
    // ...
    'components' =&gt; [
        'response' =&gt; [
            'class' =&gt; 'yii\web\Response',
            'on beforeSend' =&gt; function ($event) {
                $response = $event-&gt;sender;
                if ($response-&gt;data !== null) {
                    $response-&gt;data = [
                        'success' =&gt; $response-&gt;isSuccessful,
                        'data' =&gt; $response-&gt;data,
                    ];
                    $response-&gt;statusCode = 200;
                }
            },
        ],
    ],
];
</code></pre>
<p>Il codice sopra indicato riformatterà la risposta all'errore come la seguente:</p>
<pre><code>HTTP/1.1 200 OK
Date: Sun, 02 Mar 2014 05:31:43 GMT
Server: Apache/2.2.26 (Unix) DAV/2 PHP/5.4.20 mod_ssl/2.2.26 OpenSSL/0.9.8y
Transfer-Encoding: chunked
Content-Type: application/json; charset=UTF-8

{
    "success": false,
    "data": {
        "name": "Not Found Exception",
        "message": "The requested resource was not found.",
        "code": 0,
        "status": 404
    }
}
</code></pre>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../sub-session-cookies/" title="Session & Cookies" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Session & Cookies
              </span>
            </div>
          </a>
        
        
          <a href="../sub-logging/" title="Registrazione" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Registrazione
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            © MIT - Lorenzo Milicia - 2017
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-946997f430.js"></script>
      
      
      <script>app.initialize({version:"0.16.3",url:{base:"../.."}})</script>
      
    
    
      
      <script>!function(e,t,a,n,o,c,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=t.createElement(a),i=t.getElementsByTagName(a)[0],c.async=1,c.src=n,i.parentNode.insertBefore(c,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-109845735-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var t=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",t,e.href)})});var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script>
      
    
  </body>
</html>